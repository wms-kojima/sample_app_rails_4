!function(t){t.fn.tablefix=function(i){return this.each(function(e){var o=t.extend({},i),h=t(this),n=o.width>0,d=o.height>0;if(n?n=o.width<h.width():o.width=h.width(),d?d=o.height<h.height():o.height=h.height(),n||d){n&&d?(o.width-=40,o.height-=40):n?o.width-=20:o.height-=20,h.wrap("<div></div>");var s=h.parent();s.css({position:"relative"});var p=o.fixRows>0?o.fixRows:0,r=o.fixCols>0?o.fixCols:0,l=0,a=0;h.find("tr").each(function(i){return t(this).find("td,th").each(function(e){if(i==p&&e==r){var o=t(this);return l=o.position().left,a=o.parent("tr").position().top,!1}}),i==p?!1:void 0});var c=h.wrap("<div></div>"),f=h.clone().wrap("<div></div>"),v=h.clone().wrap("<div></div>"),w=h.clone().wrap("<div></div>"),g=c.parent().css({position:"absolute",overflow:"hidden"}),u=f.parent().css({position:"absolute",overflow:"hidden"}),x=v.parent().css({position:"absolute",overflow:"hidden"}),m=w.parent().css({position:"absolute",overflow:"auto"});s.append(u).append(x).append(m);var y=o.width-l,b=o.height-a,C=document.createElement("p");C.style.width="100%",C.style.height="200px";var L=document.createElement("div");L.style.position="absolute",L.style.top="0px",L.style.left="0px",L.style.visibility="hidden",L.style.width="200px",L.style.height="150px",L.style.overflow="hidden",L.appendChild(C);var R=null==document.body?document.documentElement:document.body;R.appendChild(L);var T=C.offsetWidth;L.style.overflow="scroll";var E=C.offsetWidth;T==E&&(E=L.clientWidth),R.removeChild(L);var W=T-E;g.width(l).height(a),u.width(y+(n?20:0)+(d?20:0)).height(a).css({left:l+"px"}),f.css({marginLeft:-l+"px",marginRight:(n?20:0)+(d?20:0)+"px"}),x.width(l).height(b+(n?20:0)+(d?20:0)).css({top:a+"px"}),v.css({marginTop:-a+"px",marginBottom:(n?20:0)+(d?20:0)+"px"}),m.width(y+(n?20:0)+(d?20:0)+W).height(b+(n?20:0)+(d?20:0)).css({left:l+"px",top:a+"px"}),w.css({marginLeft:-l+"px",marginTop:-a+"px",marginRight:(n?20:0)+"px",marginBottom:(d?20:0)+"px"}),d&&f.width(w.width()),m.scroll(function(){u.scrollLeft(m.scrollLeft()),x.scrollTop(m.scrollTop())}),s.width(o.width+(n?20:0)+(d?20:0)).height(o.height+(n?20:0)+(d?20:0))}})}}(jQuery);
